(this["webpackJsonpprueba-mirai"]=this["webpackJsonpprueba-mirai"]||[]).push([[0],{23:function(e,a,t){e.exports=t(35)},28:function(e,a,t){},29:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(15),r=t.n(c),o=(t(28),t(16)),s=t(17),i=t(21),m=t(18),h=t(9),u=t(22),d=(t(29),t(5)),p=t(6);var f=function(e){function a(a){e.handleChange({hotelId:a.target.id})}return l.a.createElement("form",{className:"form-container",action:"",method:"get"},l.a.createElement("fieldset",{className:"form-group"},l.a.createElement("div",{className:"row"},l.a.createElement("legend",{className:"col-form-label col-sm-2 pt-0"},"Elige hotel:"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label",htmlFor:"44069509"},l.a.createElement("input",{type:"radio",className:"form-check-input",id:"44069509",name:"hotel",value:e.hotelId,onChange:a}),"Hotel Baqueira Val de Neu")),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label",htmlFor:"10030559"},l.a.createElement("input",{type:"radio",className:"form-check-input",id:"10030559",name:"hotel",value:e.hotelId,onChange:a}),"Hotel Moderno")),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label",htmlFor:"100376478"},l.a.createElement("input",{type:"radio",className:"form-check-input",id:"100376478",name:"hotel",value:e.hotelId,onChange:a}),"Hotel Grand Luxor"))))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"date-checkIn"},"Fecha del check-in"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"date",className:"form-control",id:"date-checkIn",name:"date-checkIn",value:e.checkin,onChange:function(a){e.handleChange({checkin:a.target.value})}}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"nights"},"N\xfamero de noches"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"number",className:"form-control",id:"nights",name:"nights",min:"1",max:"30",value:e.nights,onChange:function(a){e.handleChange({nights:a.target.value})}}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(p.b,{to:"/roomsList"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:e.handleSearch},"Buscar oferta m\xe1s barata!")))))};var g=function(e){return l.a.createElement("li",{className:"list-group-item"},l.a.createElement(p.b,{to:"/"},l.a.createElement("span",null,"<")," Volver"),l.a.createElement("h3",{className:"list-group-item"},"Room: ",e.roomName),l.a.createElement("p",{className:"list-group-item"},"Offer: ",e.offerName),l.a.createElement("p",{className:"list-group-item"},"Board: ",e.boardName),l.a.createElement("div",{className:"list-group-item"},"Occupancy:",l.a.createElement("p",null,"Adults: ",e.occupancyAdults),l.a.createElement("p",null,"Childs: ",e.occupancyChilds),l.a.createElement("p",null,"Babies: ",e.occupancyBabies)),l.a.createElement("p",{className:"list-group-item"},"Price: ",e.netPrice,"\u20ac"))};var E=function(e){return console.log(e.data),e.data?l.a.createElement("ul",{className:"card"},e.data.map((function(e,a){return l.a.createElement(g,{key:a,roomName:e.roomName,offerName:e.offerName,boardName:e.boardName,occupancyAdults:e.occupancy.numAdults,occupancyChilds:e.occupancy.numChilds,occupancyBabies:e.occupancy.numBabies,netPrice:e.netPrice})}))):l.a.createElement("p",null,"Lo sentimos, no hay tarifas disponibles roomList")},b=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).state={data:[],hotelId:"",checkin:"",nights:"",validatedForm:""},t.handleChange=t.handleChange.bind(Object(h.a)(t)),t.handleSearch=t.handleSearch.bind(Object(h.a)(t)),t}return Object(u.a)(a,e),Object(s.a)(a,[{key:"formValidated",value:function(){var e=this.state.hotelId,a=parseInt(this.state.nights),t=this.state.checkin;t=t.split("-").join("");var n=new Date,l=n.getFullYear().toString(),c=(n.getMonth()+1).toString();c.length<2&&(c="0"+c);var r=n.getDate().toString();e&&t>=l+c+r&&a>=1&&a<=30?this.setState({validatedForm:!0}):this.setState({validatedForm:!1})}},{key:"handleChange",value:function(e){var a=this;this.setState(e,(function(){a.formValidated()}))}},{key:"handleSearch",value:function(e){var a=this,t=parseInt(this.state.hotelId),n=parseInt(this.state.nights),c=this.state.checkin.split("-").reverse().join("/"),r="https://api-pre.mirai.com/MiraiWebService/availableRate/get?hotelId=".concat(t,"&checkin=").concat(c,"&nights=").concat(n);if(!0!==!!this.state.validatedForm)return e.preventDefault(),l.a.createElement("p",null,"Lo sentimos, no hay tarifas disponibles APP+");fetch(r,{headers:{Authorization:"Basic ".concat(btoa("user1:user1Pass"))}}).then((function(e){return e.json()})).then((function(e){a.setState({data:e.availableRates[t]})}))}},{key:"render",value:function(){return console.log(this.state.data),console.log(this.state.validatedForm),l.a.createElement(l.a.Fragment,null,l.a.createElement(d.c,null,l.a.createElement(d.a,{exact:!0,path:"/"},l.a.createElement(f,{handleChange:this.handleChange,hotelId:this.state.hotelId,checkin:this.state.checkin,nights:this.state.nights,handleSearch:this.handleSearch})),l.a.createElement(d.a,{exact:!0,path:"/roomsList"},l.a.createElement(E,{data:this.state.data}))))}}]),a}(l.a.Component);r.a.render(l.a.createElement(p.a,null,l.a.createElement(b,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.5a61f0ba.chunk.js.map