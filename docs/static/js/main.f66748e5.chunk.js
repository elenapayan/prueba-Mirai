(this["webpackJsonpprueba-mirai"]=this["webpackJsonpprueba-mirai"]||[]).push([[0],{23:function(e,a,t){e.exports=t(35)},28:function(e,a,t){},29:function(e,a,t){},35:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(15),s=t.n(c),r=(t(28),t(16)),o=t(17),i=t(21),m=t(18),h=t(8),d=t(22),u=(t(29),t(6)),p=t(5);var g=function(e){function a(a){e.handleChange({hotelId:a.target.id})}return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"form-container",action:"",method:"get"},l.a.createElement("fieldset",{className:"form-group"},l.a.createElement("div",{className:"row"},l.a.createElement("legend",{className:"col-form-label col-sm-2 pt-0"},"Elige hotel:"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label",htmlFor:"44069509"},l.a.createElement("input",{type:"radio",className:"form-check-input",id:"44069509",name:"hotel",value:e.hotelId,required:!0,onChange:a}),"Hotel Baqueira Val de Neu")),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label",htmlFor:"10030559"},l.a.createElement("input",{type:"radio",className:"form-check-input",id:"10030559",name:"hotel",value:e.hotelId,required:!0,onChange:a}),"Hotel Moderno")),l.a.createElement("div",{className:"form-check"},l.a.createElement("label",{className:"form-check-label",htmlFor:"100376478"},l.a.createElement("input",{type:"radio",className:"form-check-input",id:"100376478",name:"hotel",value:e.hotelId,required:!0,onChange:a}),"Hotel Grand Luxor"))))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"date-checkIn"},"Fecha del check-in"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"date",className:"form-control",id:"date-checkIn",name:"date-checkIn",value:e.checkin,required:!0,onChange:function(a){e.handleChange({checkin:a.target.value})}}))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("label",{className:"col-sm-2 col-form-label",htmlFor:"nights"},"N\xfamero de noches"),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("input",{type:"number",className:"form-control",id:"nights",name:"nights",min:"1",max:"30",value:e.nights,placeholder:"Ej: 1",required:!0,onChange:function(a){e.handleChange({nights:a.target.value})}})))),l.a.createElement("div",{className:"form-group row"},l.a.createElement("div",{className:"col-sm-10"},l.a.createElement(p.b,{to:"/ShowRoom"},l.a.createElement("button",{className:"btn btn-primary",onClick:e.handleSearch},"Buscar")))))};var E=function(e){if(!e.showResults&&e.validatedForm)return l.a.createElement("p",null,"Loading..");if(e.data){var a=e.data.sort((function(e,a){return e.netPrice-a.netPrice}))[0];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"list-group-item"},l.a.createElement("h3",{className:"list-group-item"},"Habitaci\xf3n: ",a.roomName),l.a.createElement("p",{className:"list-group-item"},"Oferta: ",a.offerName?a.offerName:"No hay oferta disponible"),l.a.createElement("p",{className:"list-group-item"},"R\xe9gimen: ",a.boardName),l.a.createElement("div",{className:"list-group-item"},"Ocupaci\xf3n:",l.a.createElement("p",{className:"occupancy-item"},"Adultos: ",a.occupancy.numAdults),l.a.createElement("p",{className:"occupancy-item"},"Ni\xf1os: ",a.occupancy.numChilds),l.a.createElement("p",{className:"occupancy-item"},"Beb\xe9s: ",a.occupancy.numBabies)),l.a.createElement("p",{className:"list-group-item"},"Precio: ",a.netPrice,"\u20ac"))),l.a.createElement(p.b,{to:"/"},l.a.createElement("button",{className:"btn btn-secondary",onClick:e.handleReset},"Volver")))}return l.a.createElement("div",null,l.a.createElement("p",{className:"error-msg"},"Lo sentimos, no hay tarifas disponibles"),l.a.createElement(p.b,{to:"/"},l.a.createElement("button",{className:"btn btn-secondary",onClick:e.handleReset},"Volver")))},f=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).state={data:!1,hotelId:"",checkin:"",nights:"",validatedForm:"",showResults:!1},t.handleChange=t.handleChange.bind(Object(h.a)(t)),t.handleSearch=t.handleSearch.bind(Object(h.a)(t)),t.handleReset=t.handleReset.bind(Object(h.a)(t)),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"formValidated",value:function(){var e=this.state.hotelId,a=parseInt(this.state.nights),t=this.state.checkin;t=t.split("-").join("");var n=new Date,l=n.getFullYear().toString(),c=(n.getMonth()+1).toString();c.length<2&&(c="0"+c);var s=n.getDate().toString();e&&t>=l+c+s&&a>=1&&a<=30?this.setState({validatedForm:!0}):this.setState({validatedForm:!1})}},{key:"handleChange",value:function(e){var a=this;this.setState(e,(function(){a.formValidated()}))}},{key:"handleSearch",value:function(){var e=this,a=parseInt(this.state.hotelId),t=parseInt(this.state.nights),n=this.state.checkin.split("-").reverse().join("/"),l="https://api-pre.mirai.com/MiraiWebService/availableRate/get?hotelId=".concat(a,"&checkin=").concat(n,"&nights=").concat(t);!0===!!this.state.validatedForm?fetch(l,{headers:{Authorization:"Basic ".concat(btoa("user1:user1Pass"))}}).then((function(e){return e.json()})).then((function(t){t.availableRates[a]?e.setState({data:t.availableRates[a],showResults:!0}):e.setState({data:!1,showResults:!1})})):this.setState({data:!1,showResults:!1})}},{key:"handleReset",value:function(){this.setState({data:[],hotelId:"",checkin:"",nights:"",validatedForm:""})}},{key:"render",value:function(){return console.log(this.state.data),console.log(this.state.validatedForm),l.a.createElement(l.a.Fragment,null,l.a.createElement(u.c,null,l.a.createElement(u.a,{exact:!0,path:"/"},l.a.createElement(g,{handleChange:this.handleChange,hotelId:this.state.hotelId,checkin:this.state.checkin,nights:this.state.nights,handleSearch:this.handleSearch})),l.a.createElement(u.a,{path:"/ShowRoom"},l.a.createElement(E,{data:this.state.data,showResults:this.state.showResults,validatedForm:this.state.validatedForm,handleReset:this.handleReset}))))}}]),a}(l.a.Component);s.a.render(l.a.createElement(p.a,null,l.a.createElement(f,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.f66748e5.chunk.js.map